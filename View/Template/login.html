<div id="LoginPage" class="row rv-login">
    <div class="z-depth-4 card-panel">
        <form class="login-form" action="/" method="post">
            <div class="row">
                <div class="input-field col s12 center">
                    <!-- Logo -->
                    <div class="circle login-logo">
                        <svg width="100" height="100" x="0px" y="0px" viewBox="50 50 200 200" xml:space="preserve">
                            <g xmlns="http://www.w3.org/2000/svg">
                                <path fill="#3E0407" d="M143,185.3l0,33.7c0.8,0,1.5,0,2.3,0c1.6,0,3.3-0.1,4.9-0.2v-33.5c0-5-2.3-8.6-6.8-10.8    c-2.8-1.4-5.8-2.1-8.7-2.1h-7.2c3,0,5.9,0.7,8.7,2.1C140.7,176.7,143,180.3,143,185.3z" />
                                <path fill="#3E0407" d="M103.3,172.4h7.2c0.7-8.6,5.9-12.9,15.6-12.9h-7.2C109.2,159.5,104,163.8,103.3,172.4z" />
                                <path fill="#3E0407" d="M142.5,116.1c-2.6-1.1-5.3-1.6-8.1-1.6h-7.2c2.8,0,5.5,0.5,8.1,1.6c5.1,2.2,7.7,6,7.7,11.4v19    c0,8-5.3,12.3-15.8,12.9h7.2c10.5-0.6,15.8-4.9,15.8-12.9v-19C150.2,122.1,147.6,118.3,142.5,116.1z" />
                                <g>
                                    <path fill="#DB5310" d="M135.8,101.6h7.2c6.9,0.5,12.8,1.7,17.8,3.7c11.9,4.8,17.8,13.1,17.8,25v13.5c0,8.5-4,15.9-11.9,22.2     c8,6.3,11.9,13.7,11.9,22.2c0,0,0,15,0,15c16.6-12.3,27.2-29.4,27.2-51.7c0-36.2-28.3-65.7-64-67.6c0,0,0,0,0,0     c-16.3,0.9-31,7.4-42.2,17.8h0H135.8z" />
                                    <path fill="#DB5310" d="M136.1,174.5c-2.8-1.4-5.8-2.1-8.7-2.1h-7.2h-9.7h-7.2c0.7-8.6,5.9-12.9,15.6-12.9h1.1h6.1h1.1     c10.5-0.6,15.8-4.9,15.8-12.9v-19c0-5.4-2.6-9.1-7.7-11.4c-2.6-1.1-5.3-1.6-8.1-1.6H120h-6.3h-7.2c-10.7,0.7-16,5-16,12.9v63.6     c11.9,16.4,30.9,27.2,52.5,27.9l0-33.7C143,180.3,140.7,176.7,136.1,174.5z" />
                                </g>
                                <path fill="#3E0407" d="M145.3,83.7c-1.2,0-2.4,0-3.6,0.1c35.7,1.9,64,31.4,64,67.6c0,22.3-10.5,39.4-27.2,51.7c0,0,0,7.2,0,7.2    c0.9-0.5,4.4-2.5,6.9-4.5c16.6-12.3,27.4-32.1,27.4-54.4C212.9,114,182.6,83.7,145.3,83.7z" />
                                <path fill="#F2971B" d="M128.9,174.5c-2.8-1.4-5.8-2.1-8.7-2.1h-9.7h-7.2h-7.2c0.7-8.6,5.9-12.9,15.6-12.9h7.2h1.1    c10.5-0.6,15.8-4.9,15.8-12.9v-19c0-5.4-2.6-9.1-7.7-11.4c-2.6-1.1-5.3-1.6-8.1-1.6h-6.3h-7.2c-10.7,0.7-16,5-16,12.9v63.6    c10.5,14.5,26.7,24.7,45.3,27.3v-33C135.8,180.3,133.5,176.7,128.9,174.5z" />
                                <path fill="#F2971B" d="M135.8,101.6h7.2c6.9,0.5,12.8,1.7,17.8,3.7c11.9,4.8,17.8,13.1,17.8,25v13.5c0,8.5-4,15.9-11.9,22.2    c8,6.3,11.9,13.7,11.9,22.2v7.8c12.3-12.3,20-25.7,20-44.5c0-34.9-26.5-63.7-60.5-67.3c-14.8,1.6-28.2,7.9-38.6,17.5h0H135.8z" />
                            </g>
                        </svg>
                    </div>
                    <p class="center login-form-text">Revovision HR</p>
                </div>
            </div>
            <div class="row margin">
                <div class="form-group">
                    <label class="col s2 control-label"><i class="material-icons">perm_identity</i></label>
                    <div class="col s9">
                        <input type="text" name="username" class="form-control" placeholder="帳號" value="">
                    </div>
                </div>
            </div>
            <div class="row margin">
                <div class="form-group">
                    <label class="col s2 control-label"><i class="material-icons">lock_outline</i></label>
                    <div class="col s9">
                        <input type="password" name="passwd" class="form-control" placeholder="密碼" value="">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col s12 m12 l12 login-text">
                    <input type="checkbox" id="remember-me" hidden>
                    <label for="remember-me"><span>記住我</span></label>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <!--<a href="../index.html" class="btn waves-effect waves-light col s12">Login</a>-->
                    <input type="submit" class="btn waves-effect waves-light col s12"></a>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
$(function(){

  var form = $('#LoginPage form.login-form');
  var remember_input = $('#remember-me');

  var remember_data = localStorage.getItem('rv-remember');
  console.log(remember_data);
  if(remember_data){
    remember_input.prop('checked',true);
    //doLogin(remember_data);
    var rArray = remember_data.split('&');
    for(var i in rArray){
      var loc = rArray[i];
      var loc2 = loc.split('=');
      if(loc2.length>1){
        form.find('[name="'+loc2[0]+'"]').val(loc2[1]);
      }
    }
  }

  form.submit(function(e) {
      e.preventDefault();
      var data = $(this).serialize();
      doLogin(data);
  });
  
  function doLogin(data){
    API.loginWithData(data).then(function(json) {
          //onsole.log(json);
          var cnt = API.format(json);
          if (cnt.is) {
          
              if(remember_input.prop('checked')){
                localStorage.setItem('rv-remember',data);
              }else{
                localStorage.removeItem('rv-remember');
              }
              location.reload();
          } else {
              switch(cnt.get()){
              
                case "Input Wrong.":
                  alert('編號或密碼錯誤.');
                break;
                default:
                alert('登入錯誤.');
              }
          }
      });
  
  }
  
});

</script>
